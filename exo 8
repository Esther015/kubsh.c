  GNU nano 7.2                                                                                                        kubsh.c                                                                                                                 
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<signal.h>
#include<unistd.h>
#include<sys/wait.h>

#include<readline/readline.h>
#include <readline/history.h>

#define HISTORY_FILE ".kubsh_history"

sig_atomic_t signal_received = 0;

void debug(char *line){
 printf("%s\n",line);
}
void sig_handler(int signum){
 signal_received = signum;
 printf("Configuration reloaded");
}

void print_env_var(const char * var_name){
  if (var_name  == NULL || strlen(var_name)== 0 ){
    printf("Usage: \\e $VARNAME\n");
    return ;
}
  
  if(var_name[0] =='$'){
    var_name++;
  }
  const char *value= getenv(var_name);
  if(value ==NULL){
    printf("Variable '%s' not found.\n", var_name);
    return;
  }

  char *copy = strdup(value);
  if(!copy){
   perror("strdup");
   return;
  }
 printf("%s=\n",var_name);

 char *token= strtok(copy, ":");
 if(token && strchr (value , ':')){
    while(token!=NULL){
   printf("- %s\n",token);
   token = strtok(NULL, ":");
    }
 }else{
   printf("%s\n",copy);
 }
 free(copy); 
                                                                                                           [ Прочитано 115 строк ]
^G Справка        ^O Записать       ^W Поиск          ^K Вырезать       ^T Выполнить      ^C Позиция        M-U Отмена        M-A Установить метM-] На скобку     M-Q Предыдущий    ^B Назад          ^◂ ПредСлово      ^A Начало
^X Выход          ^R ЧитФайл        ^\ Замена         ^U Вставить       ^J Выровнять      ^/ К строке       M-E Повтор        M-6 Копировать    ^Q Обр. поиск     M-W Следующий     ^F Вперёд         ^▸ СледСлово      ^E Конец
